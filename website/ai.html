<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MCQ Generator</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <style>
    *{
      margin: 0;
      padding:0;
      box-sizing: border-box;
    }
        :root {
  --navbar-bg: #00899f;
  --navbar-link: white;
  --navbar-link-hover: #b2ebf2;
  --navbar-shadow: rgba(0, 0, 0, 0.1);
}

.navbar {
  background-color: var(--navbar-bg);
  color: var(--navbar-link);
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 32px;
  box-shadow: 0 2px 8px var(--navbar-shadow);
  margin-bottom: 5rem;
}
.logo {
  height: 40px;
}


.navbar nav a {
  margin-left: 20px;
  text-decoration: none;
  color: var(--navbar-link);
  font-weight: 500;
  transition: color 0.3s ease;
}

.navbar nav a:hover {
  color: var(--navbar-link-hover);
}

/* Responsive */
@media screen and (max-width: 768px) {
  .navbar {
    flex-direction: column;
    align-items: flex-start;
  }

  .navbar nav {
    margin-top: 10px;
    display: flex;
    flex-direction: column;
    width: 100%;
  }

  .navbar nav a {
    margin: 10px 0;
  }

  </style>
  <style>
  .mcq-card {
    margin-top: 3rem;
    background-color: white;
    padding: 1.5rem;
    border-radius: 1rem;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    transition: box-shadow 0.3s ease, border-left 0.3s ease;
    border-left: 4px solid transparent;
  }

  .mcq-card:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    border-left: 4px solid #00899f;
  }

  .mcq-card h4 {
    font-size: 1.125rem;
    font-weight: 600;
    color: #1f2937;
    margin-bottom: 1rem;
  }

  .mcq-card li {
    color: #374151;
    padding: 0.5rem rem;
    border-radius: 0.5rem;
    cursor: pointer;
    transition: background-color 0.2s ease;
  }

  .mcq-card li:hover:not(.correct) {
    background-color: #f3f4f6;
  }

  .mcq-card li.correct:hover {
    background-color: #16a34a; /* Tailwind green-600 */
    color: white;
    font-weight: 600;
  }
</style>


</head>
<body class="bg-white text-gray-800 font-sans p-6">
  <header class="navbar">
    
    <a href="quiz.html"><img src="./image/logo-removebg-preview.png" alt="QuizBot Logo" class="logo"/></a>
    <div class="hamburger" onclick="toggleMenu()">
    <span></span>
    <span></span>
    <span></span>
  </div>


    <nav>
      <a href="quiz.html">Home</a>
      <a href="pricing.html">Pricing</a>
      <a href="about.html">About</a>
      <a href="contact.html">Contact</a>
    </nav>
  </header>


  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">

    <!-- Left Column -->
    <div class="space-y-6">
      
      <!-- Drag and Drop Box -->
      <div id="dropZone" class="border-2 border-dashed border-gray-400 p-6 rounded-lg text-center cursor-pointer hover:bg-gray-100">
        <p class="text-gray-600">ðŸ“‚ Drag and drop your PDF here or click to select</p>
        <input type="file" id="pdfInput" accept="application/pdf" class="hidden" />
      </div>
      <p id="fileName" class="mt-2 text-sm text-green-600"></p>
      

      <!-- Difficulty Dropdown -->
      <div>
        <label class="block mb-1 font-medium text-gray-700">Select Difficulty Level</label>
        <select id="difficulty" class="w-full p-2 border rounded">
          <option>Easy</option>
          <option>Medium</option>
          <option>Hard</option>
        </select>
      </div>
      <div>
        <label class="block mb-1 font-medium text-gray-700">Select Number of Questions</label>
        <div class="relative">
          <input id="questionCountInput" type="number" min="1" max="100" value="5"
            class="w-full pl-10 pr-12 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400" />
          
          <!-- Optional alert area -->
          <p id="planLimitWarning" class="text-sm text-red-500 mt-1 hidden">Basic plan allows max 10 questions.</p>
      
          <!-- Icon -->
          <div class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500">
            <!-- icon -->
          </div>
      
          <!-- +/- -->
          <div class="absolute right-1 top-1/2 transform -translate-y-1/2 flex flex-col">
            <button onclick="changeQuestionCount(1)" class="text-blue-500 px-1 hover:text-blue-700">&#9650;</button>
            <button onclick="changeQuestionCount(-1)" class="text-blue-500 px-1 hover:text-blue-700">&#9660;</button>
          </div>
        </div>
      </div>
      



      <!-- Buttons -->
      <div class="flex gap-4">
        <button id="generateBtn" class="bg-blue-500 hover:shadow-lg text-white px-4 py-2 rounded">Generate MCQs</button>
        <button id="downloadBtn" class="bg-green-500 hover:shadow-lg text-white px-4 py-2 rounded">Download PDF</button>
      </div>
    </div>

    <!-- Right Column -->
    <div>
      <h2 class="text-xl font-semibold mb-4">Generated MCQs</h2>
      <div id="mcqDisplay" class="space-y-4 p-4 border border-gray-300 rounded bg-gray-50 min-h-[300px]"></div>
      <div class="mcq-card bg-white p-4 rounded-lg shadow">
          <h4 class="font-semibold mb-2">1. What is the capital of France?</h4>
          <ul class="space-y-2">
            <li class="correct">1. Paris</li>
            <li>2. Rome</li>
            <li>3. Berlin</li>
            <li>4. Madrid</li>
          </ul>
        </div>
    </div>
    
    <!-- Chatbot Toggle Button -->
  <button onclick="document.getElementById('chatbot').classList.remove('hidden')" class="fixed bottom-6 right-6 bg-[#00899f] hover:bg-[#007388] text-white px-4 py-2 rounded-full shadow-lg z-50">
    Chat with QuizBot
  </button>

  <!-- Chatbot Window -->
  <div id="chatbot" class="hidden fixed bottom-20 right-6 w-80 bg-white border border-gray-300 rounded-xl shadow-lg flex flex-col h-96 overflow-hidden">
    <div class="bg-[#00899f] text-white px-4 py-2 font-semibold flex justify-between items-center">
      QuizBot Chat
      <button onclick="document.getElementById('chatbot').classList.add('hidden')" class="text-white text-xl leading-none">&times;</button>
    </div>
    <div id="chatMessages" class="flex-1 p-4 overflow-y-auto text-sm space-y-2"></div>
    <form id="chatForm" class="p-2 border-t border-gray-200 flex">
      <input type="text" id="chatInput" class="flex-1 border border-gray-300 rounded-lg px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-[#00899f]" placeholder="Ask a question..." required>
      <button type="submit" class="ml-2 px-3 py-1 bg-[#00899f] text-white rounded-lg text-sm">Send</button>
    </form>
  </div>
  </div>



  <!-- JS for interactivity -->
  <script>
    const generateBtn = document.getElementById('generateBtn');
    const downloadBtn = document.getElementById('downloadBtn');
    const mcqDisplay = document.getElementById('mcqDisplay');
    const optionsInput = document.getElementById('optionsInput');
    const dragBox = document.getElementById('dragBox');
    const dropZone = document.getElementById('dropZone');
  const fileInput = document.getElementById('pdfInput');
  const fileNameDisplay = document.getElementById('fileName');

  // Enable click to open file dialog
  dropZone.addEventListener('click', () => fileInput.click());

  // Display selected file name
  fileInput.addEventListener('change', (e) => {
    const file = e.target.files[0];
    if (file && file.type === 'application/pdf') {
      fileNameDisplay.textContent = `Selected File: ${file.name}`;
      // Call your PDF processing logic here
    } else {
      fileNameDisplay.textContent = 'Please select a valid PDF file.';
    }
  });

  // Enable drag and drop
  dropZone.addEventListener('dragover', (e) => {
    e.preventDefault();
    dropZone.classList.add('bg-blue-50');
  });

  dropZone.addEventListener('dragleave', () => {
    dropZone.classList.remove('bg-blue-50');
  });

  dropZone.addEventListener('drop', (e) => {
    e.preventDefault();
    dropZone.classList.remove('bg-blue-50');
    const file = e.dataTransfer.files[0];
    if (file && file.type === 'application/pdf') {
      fileNameDisplay.textContent = `Dropped File: ${file.name}`;
      // You can also set it to the input element if needed:
      fileInput.files = e.dataTransfer.files;
      // Call your PDF processing logic here
    } else {
      fileNameDisplay.textContent = 'Please drop a valid PDF file.';
    }
  });

    dragBox.addEventListener("dragover", (e) => {
      e.preventDefault();
      dragBox.classList.add("bg-blue-100");
    });

    dragBox.addEventListener("dragleave", () => {
      dragBox.classList.remove("bg-blue-100");
    });

    dragBox.addEventListener("drop", (e) => {
      e.preventDefault();
      dragBox.classList.remove("bg-blue-100");
      const data = e.dataTransfer.getData("text");
      optionsInput.value += data ? `\n${data}` : '';
    });

    generateBtn.addEventListener("click", () => {
      const options = optionsInput.value.split('\n').filter(o => o.trim());
      const count = parseInt(document.getElementById('questionCountInput').value);

      const difficulty = document.getElementById('difficulty').value;

      if (options.length < 4) {
        alert("Please provide at least 4 options.");
        return;
      }

      mcqDisplay.innerHTML = '';
      for (let i = 1; i <= count; i++) {
        const correct = options[Math.floor(Math.random() * options.length)];
        const shuffled = [...options].sort(() => 0.5 - Math.random()).slice(0, 4);

        const card = document.createElement('div');
        card.className = 'bg-white p-4 rounded shadow border';
        card.innerHTML = `
          <h3 class="font-semibold text-blue-600">Question ${i} (${difficulty})</h3>
          <p class="text-gray-700 mb-2">What is the correct answer?</p>
          <ul class="space-y-1">
            ${shuffled.map(opt => `
              <li class="p-2 rounded ${opt === correct ? 'bg-green-100 text-green-700 font-semibold' : 'bg-gray-100'}">
                ${opt}
              </li>
            `).join('')}
          </ul>
        `;
        mcqDisplay.appendChild(card);
      }
    });

    downloadBtn.addEventListener("click", () => {
      html2pdf().from(mcqDisplay).set({
        margin: 0.5,
        filename: 'MCQs.pdf',
        image: { type: 'jpeg', quality: 0.98 },
        html2canvas: { scale: 2 },
        jsPDF: { unit: 'in', format: 'a4', orientation: 'portrait' }
      }).save();
    });
    function changeQuestionCount(change) {
  const input = document.getElementById("questionCountInput");
  let value = parseInt(input.value || 0);
  if (isNaN(value)) value = 0;
  value += change;
  if (value < 1) value = 1;
  input.value = value;
}

// Set current user plan (should come from auth system/session)
const currentPlan = 'basic'; // or 'pro', 'premium'

function changeQuestionCount(change) {
  const input = document.getElementById("questionCountInput");
  const warning = document.getElementById("planLimitWarning");
  let value = parseInt(input.value || 0);

  if (isNaN(value)) value = 0;
  value += change;
  if (value < 1) value = 1;

  // Apply plan limit
  if (currentPlan === 'basic' && value > 10) {
    warning.classList.remove("hidden");
    value = 10;
    // Optionally redirect to pricing after delay
    setTimeout(() => window.location.href = "pricing.html", 2000);
  } else {
    warning.classList.add("hidden");
  }

  input.value = value;
}
document.getElementById('generateBtn').addEventListener('click', () => {
  const count = parseInt(document.getElementById('questionCountInput').value);
  if (currentPlan === 'basic' && count > 10) {
    alert("Upgrade your plan to generate more than 10 questions.");
    window.location.href = "pricing.html";
    return;
  }

  // Proceed with MCQ generation
});



const chatForm = document.getElementById('chatForm');
    const chatInput = document.getElementById('chatInput');
    const chatMessages = document.getElementById('chatMessages');

    chatForm.addEventListener('submit', function(e) {
      e.preventDefault();
      const userMsg = chatInput.value.trim();
      if (!userMsg) return;

      const userDiv = document.createElement('div');
      userDiv.className = 'text-right';
      userDiv.innerHTML = `<span class='bg-[#00899f] text-white px-3 py-1 rounded-full inline-block'>${userMsg}</span>`;
      chatMessages.appendChild(userDiv);
      chatInput.value = '';
      chatMessages.scrollTop = chatMessages.scrollHeight;

      setTimeout(() => {
        const botDiv = document.createElement('div');
        botDiv.innerHTML = `<span class='bg-gray-200 px-3 py-1 rounded-full inline-block'>That's a great question! Let me help you with that.</span>`;
        chatMessages.appendChild(botDiv);
        chatMessages.scrollTop = chatMessages.scrollHeight;
      }, 1000);
    });
  </script>
</body>
</html>
