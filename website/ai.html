<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MCQ Generator</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <style>
    *{
      margin: 0;
      padding:0;
      box-sizing: border-box;
    }
        :root {
  --navbar-bg: #00899f;
  --navbar-link: white;
  --navbar-link-hover: #b2ebf2;
  --navbar-shadow: rgba(0, 0, 0, 0.1);
}

.navbar {
  background-color: var(--navbar-bg);
  color: var(--navbar-link);
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 32px;
  box-shadow: 0 2px 8px var(--navbar-shadow);
  margin-bottom: 5rem;
}
.logo {
  height: 40px;
}


.navbar nav a {
  margin-left: 20px;
  text-decoration: none;
  color: var(--navbar-link);
  font-weight: 500;
  transition: color 0.3s ease;
}

.navbar nav a:hover {
  color: var(--navbar-link-hover);
}

/* Responsive */
@media screen and (max-width: 768px) {
  .navbar {
    flex-direction: column;
    align-items: flex-start;
  }

  .navbar nav {
    margin-top: 10px;
    display: flex;
    flex-direction: column;
    width: 100%;
  }

  .navbar nav a {
    margin: 10px 0;
  }

  </style>
</head>
<body class="bg-white text-gray-800 font-sans p-6">
  <header class="navbar">
    
    <a href="quiz.html"><img src="./image/logo-removebg-preview.png" alt="QuizBot Logo" class="logo"/></a>
    <div class="hamburger" onclick="toggleMenu()">
    <span></span>
    <span></span>
    <span></span>
  </div>


    <nav>
      <a href="quiz.html">Home</a>
      <a href="pricing.html">Pricing</a>
      <a href="about.html">About</a>
      <a href="contact.html">Contact</a>
    </nav>
  </header>


  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">

    <!-- Left Column -->
    <div class="space-y-6">
      
      <!-- Drag and Drop Box -->
      <div id="dropZone" class="border-2 border-dashed border-gray-400 p-6 rounded-lg text-center cursor-pointer hover:bg-gray-100">
        <p class="text-gray-600">ðŸ“‚ Drag and drop your PDF here or click to select</p>
        <input type="file" id="pdfInput" accept="application/pdf" class="hidden" />
      </div>
      <p id="fileName" class="mt-2 text-sm text-green-600"></p>
      

      <!-- Difficulty Dropdown -->
      <div>
        <label class="block mb-1 font-medium text-gray-700">Select Difficulty Level</label>
        <select id="difficulty" class="w-full p-2 border rounded">
          <option>Easy</option>
          <option>Medium</option>
          <option>Hard</option>
        </select>
      </div>
      <div>
        <label class="block mb-1 font-medium text-gray-700">Select Number of Questions</label>
        <div class="relative">
          <input id="questionCountInput" type="number" min="1" max="100" value="5"
            class="w-full pl-10 pr-12 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400" />
          
          <!-- Optional alert area -->
          <p id="planLimitWarning" class="text-sm text-red-500 mt-1 hidden">Basic plan allows max 10 questions.</p>
      
          <!-- Icon -->
          <div class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500">
            <!-- icon -->
          </div>
      
          <!-- +/- -->
          <div class="absolute right-1 top-1/2 transform -translate-y-1/2 flex flex-col">
            <button onclick="changeQuestionCount(1)" class="text-blue-500 px-1 hover:text-blue-700">&#9650;</button>
            <button onclick="changeQuestionCount(-1)" class="text-blue-500 px-1 hover:text-blue-700">&#9660;</button>
          </div>
        </div>
      </div>
      



      <!-- Buttons -->
      <div class="flex gap-4">
        <button id="generateBtn" class="bg-blue-500 hover:shadow-lg text-white px-4 py-2 rounded">Generate MCQs</button>
        <button id="downloadBtn" class="bg-green-500 hover:shadow-lg text-white px-4 py-2 rounded">Download PDF</button>
      </div>
    </div>

    <!-- Right Column -->
    <div>
      <h2 class="text-xl font-semibold mb-4">Generated MCQs</h2>
      <div id="mcqDisplay" class="space-y-4 p-4 border border-gray-300 rounded bg-gray-50 min-h-[300px]"></div>
    </div>
  </div>

  <!-- JS for interactivity -->
  <script>
    const generateBtn = document.getElementById('generateBtn');
    const downloadBtn = document.getElementById('downloadBtn');
    const mcqDisplay = document.getElementById('mcqDisplay');
    const optionsInput = document.getElementById('optionsInput');
    const dragBox = document.getElementById('dragBox');
    const dropZone = document.getElementById('dropZone');
  const fileInput = document.getElementById('pdfInput');
  const fileNameDisplay = document.getElementById('fileName');

  // Enable click to open file dialog
  dropZone.addEventListener('click', () => fileInput.click());

  // Display selected file name
  fileInput.addEventListener('change', (e) => {
    const file = e.target.files[0];
    if (file && file.type === 'application/pdf') {
      fileNameDisplay.textContent = `Selected File: ${file.name}`;
      // Call your PDF processing logic here
    } else {
      fileNameDisplay.textContent = 'Please select a valid PDF file.';
    }
  });

  // Enable drag and drop
  dropZone.addEventListener('dragover', (e) => {
    e.preventDefault();
    dropZone.classList.add('bg-blue-50');
  });

  dropZone.addEventListener('dragleave', () => {
    dropZone.classList.remove('bg-blue-50');
  });

  dropZone.addEventListener('drop', (e) => {
    e.preventDefault();
    dropZone.classList.remove('bg-blue-50');
    const file = e.dataTransfer.files[0];
    if (file && file.type === 'application/pdf') {
      fileNameDisplay.textContent = `Dropped File: ${file.name}`;
      // You can also set it to the input element if needed:
      fileInput.files = e.dataTransfer.files;
      // Call your PDF processing logic here
    } else {
      fileNameDisplay.textContent = 'Please drop a valid PDF file.';
    }
  });

    dragBox.addEventListener("dragover", (e) => {
      e.preventDefault();
      dragBox.classList.add("bg-blue-100");
    });

    dragBox.addEventListener("dragleave", () => {
      dragBox.classList.remove("bg-blue-100");
    });

    dragBox.addEventListener("drop", (e) => {
      e.preventDefault();
      dragBox.classList.remove("bg-blue-100");
      const data = e.dataTransfer.getData("text");
      optionsInput.value += data ? `\n${data}` : '';
    });

    generateBtn.addEventListener("click", () => {
      const options = optionsInput.value.split('\n').filter(o => o.trim());
      const count = parseInt(document.getElementById('questionCountInput').value);

      const difficulty = document.getElementById('difficulty').value;

      if (options.length < 4) {
        alert("Please provide at least 4 options.");
        return;
      }

      mcqDisplay.innerHTML = '';
      for (let i = 1; i <= count; i++) {
        const correct = options[Math.floor(Math.random() * options.length)];
        const shuffled = [...options].sort(() => 0.5 - Math.random()).slice(0, 4);

        const card = document.createElement('div');
        card.className = 'bg-white p-4 rounded shadow border';
        card.innerHTML = `
          <h3 class="font-semibold text-blue-600">Question ${i} (${difficulty})</h3>
          <p class="text-gray-700 mb-2">What is the correct answer?</p>
          <ul class="space-y-1">
            ${shuffled.map(opt => `
              <li class="p-2 rounded ${opt === correct ? 'bg-green-100 text-green-700 font-semibold' : 'bg-gray-100'}">
                ${opt}
              </li>
            `).join('')}
          </ul>
        `;
        mcqDisplay.appendChild(card);
      }
    });

    downloadBtn.addEventListener("click", () => {
      html2pdf().from(mcqDisplay).set({
        margin: 0.5,
        filename: 'MCQs.pdf',
        image: { type: 'jpeg', quality: 0.98 },
        html2canvas: { scale: 2 },
        jsPDF: { unit: 'in', format: 'a4', orientation: 'portrait' }
      }).save();
    });
    function changeQuestionCount(change) {
  const input = document.getElementById("questionCountInput");
  let value = parseInt(input.value || 0);
  if (isNaN(value)) value = 0;
  value += change;
  if (value < 1) value = 1;
  input.value = value;
}

// Set current user plan (should come from auth system/session)
const currentPlan = 'basic'; // or 'pro', 'premium'

function changeQuestionCount(change) {
  const input = document.getElementById("questionCountInput");
  const warning = document.getElementById("planLimitWarning");
  let value = parseInt(input.value || 0);

  if (isNaN(value)) value = 0;
  value += change;
  if (value < 1) value = 1;

  // Apply plan limit
  if (currentPlan === 'basic' && value > 10) {
    warning.classList.remove("hidden");
    value = 10;
    // Optionally redirect to pricing after delay
    setTimeout(() => window.location.href = "pricing.html", 2000);
  } else {
    warning.classList.add("hidden");
  }

  input.value = value;
}
document.getElementById('generateBtn').addEventListener('click', () => {
  const count = parseInt(document.getElementById('questionCountInput').value);
  if (currentPlan === 'basic' && count > 10) {
    alert("Upgrade your plan to generate more than 10 questions.");
    window.location.href = "pricing.html";
    return;
  }

  // Proceed with MCQ generation
});

  </script>
</body>
</html>
